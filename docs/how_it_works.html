<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/markdown/how_it_works.md.vm
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>Paprika Maven Plugin &#x2013; How it works</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/atos-digital-id/paprika">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>Paprika Maven Plugin</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li class="active"><a href="#"><span class="none"></span>How it works</a></li>
    <li><a href="configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
    <li><a href="tutorial.html" title="Tutorial"><span class="none"></span>Tutorial</a></li>
    <li><a href="https://www.gnu.org/licenses/lgpl-3.0-standalone.html" class="externalLink" title="License"><span class="none"></span>License</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>How it works</h1>
<p>During the Maven execution, Paprika will get the current version number of each module, starting by looking for the last tag associated with the module. The format of the tags should be <code>&lt;artifactId&gt;/&lt;version&gt;</code>, the version part with a strict interpretation of the <a class="externalLink" href="http://semver.org/">Semantic Versioning</a> specification, so without any starting <code>v</code>. If since that last tag the file <code>pom.xml</code> or any file in the source directory have been modified (see <a href="configuration.html">Configuration</a> <code>observedPath</code>), or if any dependency (including the parent hierarchy) have been modified or released, the module is considered modified. Some modification in <code>pom.xml</code> are tolerated: modifying <code>&lt;modules&gt;</code> or changing order in any list, like <code>&lt;properties&gt;</code> or <code>&lt;dependencies&gt;</code>, are ignored. To search the last tag or the last modification, Paprika will upstream the Git history, but only the first parent of each commit will be followed, as if we use <a class="externalLink" href="http://git-scm.com/docs/git-log#Documentation/git-log.txt---first-parent"><code>--first-parent</code> in <code>git-log</code> command</a>. In case of modification, the minor version of the last tagged version is increased, the patch number is forced to <code>0</code> and the pre-release tags are <code>SNAPSHOT</code> and the name of the branch. The branch name is not added if the branch is white-listed (see <a href="configuration.html">Configuration</a> <code>nonQualifierBranches</code>). If the banch name is added, any <code>\/:'&quot;&lt;&gt;|?*</code> characters are replaced by a <code>-</code>. If the module is not modified since his last tag, the version number found in the tag is used.</p>
<p>The placeholders <code>${paprika}</code> described in <a href="installation.html">Installation</a> are replaced <i>in line</i> during the parse of the <code>pom.xml</code> file and the substitution is not based on the <a class="externalLink" href="http://maven.apache.org/pom.html#Properties">Maven properties</a>. But some properties are created by Paprika and can be used during the build, in other plugins configurations or in <a class="externalLink" href="http://maven.apache.org/pom.html#resources">filtered resources</a>. These properties are:</p>
<p><i>Note</i>: the <i>null commit id</i> is <code>0000000000000000000000000000000000000000</code>, which is 40 times &#x2018;0&#x2019;.</p>
<p><i>Note</i>: A <i>dirty</i> module means that the module has some modifications in the working directory or in the index, and not yet committed.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>Name </th>
<th> Description</th></tr>
</thead><tbody>

<tr class="b">
<td><code>${paprika.tagCommit}</code> </td>
<td> Last commit id (SHA1) releasing the module. Set with the null commit id if the module has never been released.</td></tr>
<tr class="a">
<td><code>${paprika.tagCommit.short}</code> </td>
<td> Shortened (9 characters) id of <code>${paprika.tagCommit}</code>.</td></tr>
<tr class="b">
<td><code>${paprika.refName}</code> </td>
<td> Name of the tag referencing the last released version. Set with <code>HEAD</code> if the module has never been released.</td></tr>
<tr class="a">
<td><code>${paprika.baseVersion}</code> </td>
<td> Last released version. See <a href="configuration.html">Configuration</a> <code>initVersion</code> for the default value.</td></tr>
<tr class="b">
<td><code>${paprika.lastCommit}</code> </td>
<td> Last commit id (SHA1) modifying the module, or <code>${paprika.tagCommit}</code> value if no modifications are found since that commit. Set with the null commit id if the module is dirty.</td></tr>
<tr class="a">
<td><code>${paprika.lastCommit.short}</code> </td>
<td> Shortened (9 characters) id of <code>${paprika.lastCommit}</code>.</td></tr>
<tr class="b">
<td><code>${paprika.lastModification}</code> </td>
<td> Creation date of <code>${paprika.lastCommit}</code>. Set with the date of the starting of <code>mvn</code> command if the module is dirty.</td></tr>
<tr class="a">
<td><code>${paprika.snapshot}</code> </td>
<td> <code>true</code> if the module is dirty or has been modified since the last releasing tag, <code>false</code> otherwise (opposite of <code>${paprika.pristine}</code>).</td></tr>
<tr class="b">
<td><code>${paprika.pristine}</code> </td>
<td> <code>true</code> if the module has not been modified since the last releasing tag, <code>false</code> otherwise (opposite of <code>${paprika.snapshot}</code>).</td></tr>
<tr class="a">
<td><code>${paprika}</code> </td>
<td> Computed version of the module.</td></tr>
<tr class="b">
<td><code>${paprika.analyzed}</code> </td>
<td> A list of all modules analyzed by Paprika.</td></tr>
<tr class="a">
<td><code>${project.build.outputTimestamp}</code> </td>
<td> Copy of <code>${paprika.lastModification}</code>. The value is defined only if no value are already set and if <a href="configuration.html">Configuration</a> <code>reproducible</code> allowing it. See <a class="externalLink" href="http://maven.apache.org/guides/mini/guide-reproducible-builds.html">Maven reproducible builds</a> for more informations.</td></tr>
</tbody>
</table>
<p>Paprika inject also informations about every other modules which are included in the multi-module project. So, for each module <code>&lt;artifactId&gt;</code> (including the current module being build), the following properties are defined:</p>
<ul>

<li><code>${paprika.&lt;artifactId&gt;.lastCommit}</code></li>
<li><code>${paprika.&lt;artifactId&gt;.lastCommit.short}</code></li>
<li><code>${paprika.&lt;artifactId&gt;.lastModification}</code></li>
<li><code>${paprika.&lt;artifactId&gt;.tagCommit}</code></li>
<li><code>${paprika.&lt;artifactId&gt;.tagCommit.short}</code></li>
<li><code>${paprika.&lt;artifactId&gt;.refName}</code></li>
<li><code>${paprika.&lt;artifactId&gt;.baseVersion}</code></li>
<li><code>${paprika.&lt;artifactId&gt;.snapshot}</code></li>
<li><code>${paprika.&lt;artifactId&gt;.pristine}</code></li>
<li><code>${paprika.&lt;artifactId&gt;}</code></li>
</ul>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2021
<a href="https://atos.net/">Atos</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
